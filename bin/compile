#!/bin/sh

indent() {
  sed -u 's/^/       /'
}

# get the source version and the current timestamp
COMMIT_HASH=$SOURCE_VERSION
COMMIT_DATE=`date +"%Y-%m-%d %T %z"`
echo "-----> Creating profile.d/stamp.sh with $COMMIT_HASH and date $COMMIT_DATE"

if [ ! -d $1/.profile.d ]; then
  mkdir $1/.profile.d/
fi

echo "#!/bin/sh" > $1/.profile.d/stamp.sh
echo "export COMMIT_HASH=$COMMIT_HASH" >> $1/.profile.d/stamp.sh
echo "export COMMIT_DATE=\"$COMMIT_DATE\"" >> $1/.profile.d/stamp.sh
